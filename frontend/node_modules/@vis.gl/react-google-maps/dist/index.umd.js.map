{"version":3,"file":"index.umd.js","sources":["../src/libraries/api-loading-status.ts","../src/libraries/google-maps-api-loader.ts","../src/components/api-provider.tsx","../src/components/map/use-map-events.ts","../src/libraries/use-deep-compare-effect.tsx","../src/components/map/use-map-options.ts","../src/hooks/use-api-loading-status.ts","../src/components/map/use-deckgl-camera-update.ts","../src/libraries/lat-lng-utils.ts","../src/components/map/use-map-camera-params.ts","../src/components/map/auth-failure-message.tsx","../src/libraries/use-callback-ref.tsx","../src/hooks/use-api-is-loaded.ts","../src/libraries/use-force-update.ts","../src/components/map/use-tracked-camera-state-ref.ts","../src/components/map/use-map-instance.ts","../src/components/map/index.tsx","../src/hooks/use-maps-library.ts","../src/components/advanced-marker.tsx","../src/components/info-window.tsx","../src/libraries/errors.ts","../src/hooks/use-map.ts","../src/components/map-control.tsx","../src/components/marker.tsx","../src/components/pin.tsx","../src/libraries/limit-tilt-range.ts"],"sourcesContent":["export const APILoadingStatus = {\n  NOT_LOADED: 'NOT_LOADED',\n  LOADING: 'LOADING',\n  LOADED: 'LOADED',\n  FAILED: 'FAILED',\n  AUTH_FAILURE: 'AUTH_FAILURE'\n};\nexport type APILoadingStatus =\n  (typeof APILoadingStatus)[keyof typeof APILoadingStatus];\n","import {APILoadingStatus} from './api-loading-status';\n\nexport type ApiParams = {\n  key: string;\n  v?: string;\n  language?: string;\n  region?: string;\n  libraries?: string;\n  solutionChannel?: string;\n  authReferrerPolicy?: string;\n};\n\ntype LoadingStatusCallback = (status: APILoadingStatus) => void;\n\nconst MAPS_API_BASE_URL = 'https://maps.googleapis.com/maps/api/js';\n\n/**\n * A GoogleMapsApiLoader to reliably load and unload the Google Maps JavaScript API.\n *\n * The actual loading and unloading is delayed into the microtask queue, to\n * allow using the API in an useEffect hook, without worrying about multiple API loads.\n */\nexport class GoogleMapsApiLoader {\n  /**\n   * The current loadingStatus of the API.\n   */\n  public static loadingStatus: APILoadingStatus = APILoadingStatus.NOT_LOADED;\n\n  /**\n   * The parameters used for first loading the API.\n   */\n  public static serializedApiParams?: string;\n\n  /**\n   * A list of functions to be notified when the loading status changes.\n   */\n  private static listeners: LoadingStatusCallback[] = [];\n\n  /**\n   * Loads the Google Maps API with the specified parameters.\n   * Since the Maps library can only be loaded once per page, this will\n   * produce a warning when called multiple times with different\n   * parameters.\n   *\n   * The returned promise resolves when loading completes\n   * and rejects in case of an error or when the loading was aborted.\n   */\n  static async load(\n    params: ApiParams,\n    onLoadingStatusChange: (status: APILoadingStatus) => void\n  ): Promise<void> {\n    const libraries = params.libraries ? params.libraries.split(',') : [];\n    const serializedParams = this.serializeParams(params);\n\n    this.listeners.push(onLoadingStatusChange);\n\n    // Note: if `google.maps.importLibrary` has been defined externally, we\n    //   assume that loading is complete and successful.\n    //   If it was defined by a previous call to this method, a warning\n    //   message is logged if there are differences in api-parameters used\n    //   for both calls.\n\n    if (window.google?.maps?.importLibrary as unknown) {\n      // no serialized parameters means it was loaded externally\n      if (!this.serializedApiParams) {\n        this.loadingStatus = APILoadingStatus.LOADED;\n      }\n      this.notifyLoadingStatusListeners();\n    } else {\n      this.serializedApiParams = serializedParams;\n      this.initImportLibrary(params);\n    }\n\n    if (\n      this.serializedApiParams &&\n      this.serializedApiParams !== serializedParams\n    ) {\n      console.warn(\n        `[google-maps-api-loader] The maps API has already been loaded ` +\n          `with different parameters and will not be loaded again. Refresh the ` +\n          `page for new values to have effect.`\n      );\n    }\n\n    const librariesToLoad = ['maps', ...libraries];\n    await Promise.all(\n      librariesToLoad.map(name => google.maps.importLibrary(name))\n    );\n  }\n\n  /**\n   * Serialize the paramters used to load the library for easier comparison.\n   */\n  private static serializeParams(params: ApiParams): string {\n    return [\n      params.v,\n      params.key,\n      params.language,\n      params.region,\n      params.authReferrerPolicy,\n      params.solutionChannel\n    ].join('/');\n  }\n\n  /**\n   * Creates the global `google.maps.importLibrary` function for bootstrapping.\n   * This is essentially a formatted version of the dynamic loading script\n   * from the official documentation with some minor adjustments.\n   *\n   * The created importLibrary function will load the Google Maps JavaScript API,\n   * which will then replace the `google.maps.importLibrary` function with the full\n   * implementation.\n   *\n   * @see https://developers.google.com/maps/documentation/javascript/load-maps-js-api#dynamic-library-import\n   */\n  private static initImportLibrary(params: ApiParams) {\n    if (!window.google) window.google = {} as never;\n    if (!window.google.maps) window.google.maps = {} as never;\n\n    if (window.google.maps['importLibrary']) {\n      console.error(\n        '[google-maps-api-loader-internal]: initImportLibrary must only be called once'\n      );\n\n      return;\n    }\n\n    let apiPromise: Promise<void> | null = null;\n\n    const loadApi = () => {\n      if (apiPromise) return apiPromise;\n\n      apiPromise = new Promise((resolve, reject) => {\n        const scriptElement = document.createElement('script');\n        const urlParams = new URLSearchParams();\n\n        for (const [key, value] of Object.entries(params)) {\n          const urlParamName = key.replace(\n            /[A-Z]/g,\n            t => '_' + t[0].toLowerCase()\n          );\n          urlParams.set(urlParamName, value);\n        }\n        urlParams.set('loading', 'async');\n        urlParams.set('callback', '__googleMapsCallback__');\n\n        scriptElement.async = true;\n        scriptElement.src = MAPS_API_BASE_URL + `?` + urlParams.toString();\n        scriptElement.nonce =\n          (document.querySelector('script[nonce]') as HTMLScriptElement)\n            ?.nonce || '';\n\n        scriptElement.onerror = () => {\n          this.loadingStatus = APILoadingStatus.FAILED;\n          this.notifyLoadingStatusListeners();\n          reject(new Error('The Google Maps JavaScript API could not load.'));\n        };\n\n        window.__googleMapsCallback__ = () => {\n          this.loadingStatus = APILoadingStatus.LOADED;\n          this.notifyLoadingStatusListeners();\n          resolve();\n        };\n\n        window.gm_authFailure = () => {\n          this.loadingStatus = APILoadingStatus.AUTH_FAILURE;\n          this.notifyLoadingStatusListeners();\n        };\n\n        this.loadingStatus = APILoadingStatus.LOADING;\n        this.notifyLoadingStatusListeners();\n\n        document.head.append(scriptElement);\n      });\n\n      return apiPromise;\n    };\n\n    // for the first load, we declare an importLibrary function that will\n    // be overwritten once the api is loaded.\n    google.maps.importLibrary = libraryName =>\n      loadApi().then(() => google.maps.importLibrary(libraryName));\n  }\n\n  /**\n   * Calls all registered loadingStatusListeners after a status update.\n   */\n  private static notifyLoadingStatusListeners() {\n    for (const fn of this.listeners) {\n      fn(this.loadingStatus);\n    }\n  }\n}\n\n// Declare global maps callback functions\ndeclare global {\n  interface Window {\n    __googleMapsCallback__?: () => void;\n    gm_authFailure?: () => void;\n  }\n}\n","import React, {\n  PropsWithChildren,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useState\n} from 'react';\n\nimport {\n  ApiParams,\n  GoogleMapsApiLoader\n} from '../libraries/google-maps-api-loader';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n\ntype ImportLibraryFunction = typeof google.maps.importLibrary;\ntype GoogleMapsLibrary = Awaited<ReturnType<ImportLibraryFunction>>;\ntype LoadedLibraries = {[name: string]: GoogleMapsLibrary};\n\nexport interface APIProviderContextValue {\n  status: APILoadingStatus;\n  loadedLibraries: LoadedLibraries;\n  importLibrary: typeof google.maps.importLibrary;\n  mapInstances: Record<string, google.maps.Map>;\n  addMapInstance: (map: google.maps.Map, id?: string) => void;\n  removeMapInstance: (id?: string) => void;\n  clearMapInstances: () => void;\n}\n\nexport const APIProviderContext =\n  React.createContext<APIProviderContextValue | null>(null);\n\nexport type APIProviderProps = {\n  /**\n   * apiKey must be provided to load the Google Maps JavaScript API. To create an API key, see: https://developers.google.com/maps/documentation/javascript/get-api-key\n   * Part of:\n   */\n  apiKey: string;\n  /**\n   * A custom id to reference the script tag can be provided. The default is set to 'google-maps-api'\n   * @default 'google-maps-api'\n   */\n  libraries?: Array<string>;\n  /**\n   * A specific version of the Google Maps JavaScript API can be used.\n   * Read more about versioning: https://developers.google.com/maps/documentation/javascript/versions\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  version?: string;\n  /**\n   * Sets the map to a specific region.\n   * Read more about localizing the Map: https://developers.google.com/maps/documentation/javascript/localization\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  region?: string;\n  /**\n   * Use a specific language for the map.\n   * Read more about localizing the Map: https://developers.google.com/maps/documentation/javascript/localization\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  language?: string;\n  /**\n   * auth_referrer_policy can be set to 'origin'.\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  authReferrerPolicy?: string;\n  /**\n   * A function that can be used to execute code after the Google Maps JavaScript API has been loaded.\n   */\n  onLoad?: () => void;\n};\n\n/**\n * local hook to set up the map-instance management context.\n */\nfunction useMapInstances() {\n  const [mapInstances, setMapInstances] = useState<\n    Record<string, google.maps.Map>\n  >({});\n\n  const addMapInstance = (mapInstance: google.maps.Map, id = 'default') => {\n    setMapInstances(instances => ({...instances, [id]: mapInstance}));\n  };\n\n  const removeMapInstance = (id = 'default') => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setMapInstances(({[id]: _, ...remaining}) => remaining);\n  };\n\n  const clearMapInstances = () => {\n    setMapInstances({});\n  };\n\n  return {mapInstances, addMapInstance, removeMapInstance, clearMapInstances};\n}\n\n/**\n * local hook to handle the loading of the maps API, returns the current loading status\n * @param props\n */\nfunction useGoogleMapsApiLoader(props: APIProviderProps) {\n  const {onLoad, apiKey, version, libraries = [], ...otherApiParams} = props;\n\n  const [status, setStatus] = useState<APILoadingStatus>(\n    GoogleMapsApiLoader.loadingStatus\n  );\n  const [loadedLibraries, addLoadedLibrary] = useReducer(\n    (\n      loadedLibraries: LoadedLibraries,\n      action: {name: keyof LoadedLibraries; value: LoadedLibraries[string]}\n    ) => {\n      return {...loadedLibraries, [action.name]: action.value};\n    },\n    {}\n  );\n\n  const librariesString = useMemo(() => libraries?.join(','), [libraries]);\n  const serializedParams = useMemo(\n    () => JSON.stringify({apiKey, version, ...otherApiParams}),\n    [apiKey, version, otherApiParams]\n  );\n\n  const importLibrary: typeof google.maps.importLibrary = useCallback(\n    async (name: string) => {\n      if (loadedLibraries[name]) {\n        return loadedLibraries[name];\n      }\n\n      if (!google?.maps?.importLibrary) {\n        throw new Error(\n          '[api-provider-internal] importLibrary was called before ' +\n            'google.maps.importLibrary was defined.'\n        );\n      }\n\n      const res = await window.google.maps.importLibrary(name);\n      addLoadedLibrary({name, value: res});\n\n      return res;\n    },\n    [loadedLibraries]\n  );\n\n  useEffect(\n    () => {\n      (async () => {\n        try {\n          const params: ApiParams = {key: apiKey, ...otherApiParams};\n          if (version) params.v = version;\n          if (librariesString?.length > 0) params.libraries = librariesString;\n\n          await GoogleMapsApiLoader.load(params, status => setStatus(status));\n\n          for (const name of ['core', 'maps', ...libraries]) {\n            await importLibrary(name);\n          }\n\n          if (onLoad) {\n            onLoad();\n          }\n        } catch (error) {\n          console.error('<ApiProvider> failed to load Google Maps API', error);\n        }\n      })();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [apiKey, librariesString, serializedParams]\n  );\n\n  return {\n    status,\n    loadedLibraries,\n    importLibrary\n  };\n}\n\n/**\n * Component to wrap the Google Maps React components and load the Google Maps JavaScript API\n */\nexport const APIProvider = (\n  props: PropsWithChildren<APIProviderProps>\n): ReactElement | null => {\n  const {children, ...loaderProps} = props;\n  const {mapInstances, addMapInstance, removeMapInstance, clearMapInstances} =\n    useMapInstances();\n\n  const {status, loadedLibraries, importLibrary} =\n    useGoogleMapsApiLoader(loaderProps);\n\n  const contextValue: APIProviderContextValue = useMemo(\n    () => ({\n      mapInstances,\n      addMapInstance,\n      removeMapInstance,\n      clearMapInstances,\n      status,\n      loadedLibraries,\n      importLibrary\n    }),\n    [\n      mapInstances,\n      addMapInstance,\n      removeMapInstance,\n      clearMapInstances,\n      status,\n      loadedLibraries,\n      importLibrary\n    ]\n  );\n\n  return (\n    <APIProviderContext.Provider value={contextValue}>\n      {children}\n    </APIProviderContext.Provider>\n  );\n};\n","import {useEffect} from 'react';\n\n/**\n * Handlers for all events that could be emitted by map-instances.\n */\nexport type MapEventProps = Partial<{\n  // map view state events\n  onBoundsChanged: (event: MapCameraChangedEvent) => void;\n  onCenterChanged: (event: MapCameraChangedEvent) => void;\n  onHeadingChanged: (event: MapCameraChangedEvent) => void;\n  onTiltChanged: (event: MapCameraChangedEvent) => void;\n  onZoomChanged: (event: MapCameraChangedEvent) => void;\n  onProjectionChanged: (event: MapCameraChangedEvent) => void;\n  onCameraChanged: (event: MapCameraChangedEvent) => void;\n\n  // mouse / touch / pointer events\n  onClick: (event: MapMouseEvent) => void;\n  onDblclick: (event: MapMouseEvent) => void;\n  onContextmenu: (event: MapMouseEvent) => void;\n  onMousemove: (event: MapMouseEvent) => void;\n  onMouseover: (event: MapMouseEvent) => void;\n  onMouseout: (event: MapMouseEvent) => void;\n  onDrag: (event: MapEvent) => void;\n  onDragend: (event: MapEvent) => void;\n  onDragstart: (event: MapEvent) => void;\n\n  // loading events\n  onTilesLoaded: (event: MapEvent) => void;\n  onIdle: (event: MapEvent) => void;\n\n  // configuration events\n  onIsFractionalZoomEnabledChanged: (event: MapEvent) => void;\n  onMapCapabilitiesChanged: (event: MapEvent) => void;\n  onMapTypeIdChanged: (event: MapEvent) => void;\n  onRenderingTypeChanged: (event: MapEvent) => void;\n}>;\n\n/**\n * Sets up effects to bind event-handlers for all event-props in MapEventProps.\n * @internal\n */\nexport function useMapEvents(\n  map: google.maps.Map | null,\n  props: MapEventProps\n) {\n  // note: calling a useEffect hook from within a loop is prohibited by the\n  // rules of hooks, but it's ok here since it's unconditional and the number\n  // and order of iterations is always strictly the same.\n  // (see https://legacy.reactjs.org/docs/hooks-rules.html)\n\n  for (const propName of eventPropNames) {\n    // fixme: this cast is essentially a 'trust me, bro' for typescript, but\n    //   a proper solution seems way too complicated right now\n    const handler = props[propName] as (ev: MapEvent) => void;\n    const eventType = propNameToEventType[propName];\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      if (!map) return;\n      if (!handler) return;\n\n      const listener = google.maps.event.addListener(\n        map,\n        eventType,\n        (ev?: google.maps.MapMouseEvent | google.maps.IconMouseEvent) => {\n          handler(createMapEvent(eventType, map, ev));\n        }\n      );\n\n      return () => listener.remove();\n    }, [map, eventType, handler]);\n  }\n}\n\n/**\n * Create the wrapped map-events used for the event-props.\n * @param type the event type as it is specified to the maps api\n * @param map the map instance the event originates from\n * @param srcEvent the source-event if there is one.\n */\nfunction createMapEvent(\n  type: string,\n  map: google.maps.Map,\n  srcEvent?: google.maps.MapMouseEvent | google.maps.IconMouseEvent\n): MapEvent {\n  const ev: MapEvent = {\n    type,\n    map,\n    detail: {},\n    stoppable: false,\n    stop: () => {}\n  };\n\n  if (cameraEventTypes.includes(type)) {\n    const camEvent = ev as MapCameraChangedEvent;\n\n    const center = map.getCenter();\n    const zoom = map.getZoom();\n    const heading = map.getHeading() || 0;\n    const tilt = map.getTilt() || 0;\n    const bounds = map.getBounds();\n\n    if (!center || !bounds || !Number.isFinite(zoom)) {\n      console.warn(\n        '[createEvent] at least one of the values from the map ' +\n          'returned undefined. This is not expected to happen. Please ' +\n          'report an issue at https://github.com/visgl/react-google-maps/issues/new'\n      );\n    }\n\n    camEvent.detail = {\n      center: center?.toJSON() || {lat: 0, lng: 0},\n      zoom: (zoom as number) || 0,\n      heading: heading as number,\n      tilt: tilt as number,\n      bounds: bounds?.toJSON() || {\n        north: 90,\n        east: 180,\n        south: -90,\n        west: -180\n      }\n    };\n\n    return camEvent;\n  } else if (mouseEventTypes.includes(type)) {\n    if (!srcEvent)\n      throw new Error('[createEvent] mouse events must provide a srcEvent');\n    const mouseEvent = ev as MapMouseEvent;\n\n    mouseEvent.domEvent = srcEvent.domEvent;\n    mouseEvent.stoppable = true;\n    mouseEvent.stop = () => srcEvent.stop();\n\n    mouseEvent.detail = {\n      latLng: srcEvent.latLng?.toJSON() || null,\n      placeId: (srcEvent as google.maps.IconMouseEvent).placeId\n    };\n\n    return mouseEvent;\n  }\n\n  return ev;\n}\n\n/**\n * maps the camelCased names of event-props to the corresponding event-types\n * used in the maps API.\n */\nconst propNameToEventType: {[prop in keyof Required<MapEventProps>]: string} = {\n  onBoundsChanged: 'bounds_changed',\n  onCenterChanged: 'center_changed',\n  onClick: 'click',\n  onContextmenu: 'contextmenu',\n  onDblclick: 'dblclick',\n  onDrag: 'drag',\n  onDragend: 'dragend',\n  onDragstart: 'dragstart',\n  onHeadingChanged: 'heading_changed',\n  onIdle: 'idle',\n  onIsFractionalZoomEnabledChanged: 'isfractionalzoomenabled_changed',\n  onMapCapabilitiesChanged: 'mapcapabilities_changed',\n  onMapTypeIdChanged: 'maptypeid_changed',\n  onMousemove: 'mousemove',\n  onMouseout: 'mouseout',\n  onMouseover: 'mouseover',\n  onProjectionChanged: 'projection_changed',\n  onRenderingTypeChanged: 'renderingtype_changed',\n  onTilesLoaded: 'tilesloaded',\n  onTiltChanged: 'tilt_changed',\n  onZoomChanged: 'zoom_changed',\n\n  // note: onCameraChanged is an alias for the bounds_changed event,\n  // since that is going to be fired in every situation where the camera is\n  // updated.\n  onCameraChanged: 'bounds_changed'\n} as const;\n\nconst cameraEventTypes = [\n  'bounds_changed',\n  'center_changed',\n  'heading_changed',\n  'projection_changed',\n  'tilt_changed',\n  'zoom_changed'\n];\n\nconst mouseEventTypes = [\n  'click',\n  'contextmenu',\n  'dblclick',\n  'mousemove',\n  'mouseout',\n  'mouseover'\n];\n\ntype MapEventPropName = keyof MapEventProps;\nconst eventPropNames = Object.keys(propNameToEventType) as MapEventPropName[];\n\nexport type MapEvent<T = unknown> = {\n  type: string;\n  map: google.maps.Map;\n  detail: T;\n\n  stoppable: boolean;\n  stop: () => void;\n  domEvent?: MouseEvent | TouchEvent | PointerEvent | KeyboardEvent | Event;\n};\n\nexport type MapMouseEvent = MapEvent<{\n  latLng: google.maps.LatLngLiteral | null;\n  placeId: string | null;\n}>;\n\nexport type MapCameraChangedEvent = MapEvent<{\n  center: google.maps.LatLngLiteral;\n  bounds: google.maps.LatLngBoundsLiteral;\n  zoom: number;\n  heading: number;\n  tilt: number;\n}>;\n","import {DependencyList, EffectCallback, useEffect, useRef} from 'react';\nimport isDeepEqual from 'fast-deep-equal';\n\nexport function useDeepCompareEffect(\n  effect: EffectCallback,\n  deps: DependencyList\n) {\n  const ref = useRef<DependencyList | undefined>(undefined);\n\n  if (!ref.current || !isDeepEqual(deps, ref.current)) {\n    ref.current = deps;\n  }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(effect, ref.current);\n}\n","import {MapProps} from '../map';\nimport {useDeepCompareEffect} from '../../libraries/use-deep-compare-effect';\n\nconst mapOptionKeys = new Set([\n  'backgroundColor',\n  'clickableIcons',\n  'controlSize',\n  'disableDefaultUI',\n  'disableDoubleClickZoom',\n  'draggable',\n  'draggableCursor',\n  'draggingCursor',\n  'fullscreenControl',\n  'fullscreenControlOptions',\n  'gestureHandling',\n  'isFractionalZoomEnabled',\n  'keyboardShortcuts',\n  'mapTypeControl',\n  'mapTypeControlOptions',\n  'mapTypeId',\n  'maxZoom',\n  'minZoom',\n  'noClear',\n  'panControl',\n  'panControlOptions',\n  'restriction',\n  'rotateControl',\n  'rotateControlOptions',\n  'scaleControl',\n  'scaleControlOptions',\n  'scrollwheel',\n  'streetView',\n  'streetViewControl',\n  'streetViewControlOptions',\n  'styles',\n  'zoomControl',\n  'zoomControlOptions'\n]);\n\n/**\n * Internal hook to update the map-options when props are changed.\n *\n * @param map the map instance\n * @param mapProps the props to update the map-instance with\n * @internal\n */\nexport function useMapOptions(map: google.maps.Map | null, mapProps: MapProps) {\n  /* eslint-disable react-hooks/exhaustive-deps --\n   *\n   * The following effects aren't triggered when the map is changed.\n   * In that case, the values will be or have been passed to the map\n   * constructor via mapOptions.\n   */\n\n  const mapOptions: google.maps.MapOptions = {};\n  const keys = Object.keys(mapProps) as (keyof google.maps.MapOptions)[];\n  for (const key of keys) {\n    if (!mapOptionKeys.has(key)) continue;\n\n    mapOptions[key] = mapProps[key] as never;\n  }\n\n  // update the map options when mapOptions is changed\n  // Note: due to the destructuring above, mapOptions will be seen as changed\n  //   with every re-render, so we're assuming the maps-api will properly\n  //   deal with unchanged option-values passed into setOptions.\n  useDeepCompareEffect(() => {\n    if (!map) return;\n\n    map.setOptions(mapOptions);\n  }, [mapOptions]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n}\n","import {useContext} from 'react';\nimport {APIProviderContext} from '../components/api-provider';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n\nexport function useApiLoadingStatus(): APILoadingStatus {\n  return useContext(APIProviderContext)?.status || APILoadingStatus.NOT_LOADED;\n}\n","import {useLayoutEffect} from 'react';\n\nexport type DeckGlCompatProps = {\n  /**\n   * Viewport from deck.gl\n   */\n  viewport?: unknown;\n  /**\n   * View state from deck.gl\n   */\n  viewState?: Record<string, unknown>;\n  /**\n   * Initial View State from deck.gl\n   */\n  initialViewState?: Record<string, unknown>;\n};\n\n/**\n * Internal hook that updates the camera when deck.gl viewState changes.\n * @internal\n */\nexport function useDeckGLCameraUpdate(\n  map: google.maps.Map | null,\n  props: DeckGlCompatProps\n) {\n  const {viewport, viewState} = props;\n  const isDeckGlControlled = !!viewport;\n\n  useLayoutEffect(() => {\n    if (!map || !viewState) return;\n\n    const {\n      latitude,\n      longitude,\n      bearing: heading,\n      pitch: tilt,\n      zoom\n    } = viewState as Record<string, number>;\n\n    map.moveCamera({\n      center: {lat: latitude, lng: longitude},\n      heading,\n      tilt,\n      zoom: zoom + 1\n    });\n  }, [map, viewState]);\n\n  return isDeckGlControlled;\n}\n","export function isLatLngLiteral(\n  obj: unknown\n): obj is google.maps.LatLngLiteral {\n  if (!obj || typeof obj !== 'object') return false;\n  if (!('lat' in obj && 'lng' in obj)) return false;\n\n  return Number.isFinite(obj.lat) && Number.isFinite(obj.lng);\n}\n\nexport function latLngEquals(\n  a: google.maps.LatLngLiteral | google.maps.LatLng | undefined | null,\n  b: google.maps.LatLngLiteral | google.maps.LatLng | undefined | null\n): boolean {\n  if (!a || !b) return false;\n  const A = toLatLngLiteral(a);\n  const B = toLatLngLiteral(b);\n  if (A.lat !== B.lat || A.lng !== B.lng) return false;\n  return true;\n}\n\nexport function toLatLngLiteral(\n  obj: google.maps.LatLngLiteral | google.maps.LatLng\n): google.maps.LatLngLiteral {\n  if (isLatLngLiteral(obj)) return obj;\n\n  return obj.toJSON();\n}\n","import {useLayoutEffect} from 'react';\nimport {CameraStateRef} from './use-tracked-camera-state-ref';\nimport {toLatLngLiteral} from '../../libraries/lat-lng-utils';\nimport {MapProps} from '../map';\n\nexport function useMapCameraParams(\n  map: google.maps.Map | null,\n  cameraStateRef: CameraStateRef,\n  mapProps: MapProps\n) {\n  const center = mapProps.center ? toLatLngLiteral(mapProps.center) : null;\n\n  let lat: number | null = null;\n  let lng: number | null = null;\n\n  if (center && Number.isFinite(center.lat) && Number.isFinite(center.lng)) {\n    lat = center.lat as number;\n    lng = center.lng as number;\n  }\n\n  const zoom: number | null = Number.isFinite(mapProps.zoom)\n    ? (mapProps.zoom as number)\n    : null;\n  const heading: number | null = Number.isFinite(mapProps.heading)\n    ? (mapProps.heading as number)\n    : null;\n  const tilt: number | null = Number.isFinite(mapProps.tilt)\n    ? (mapProps.tilt as number)\n    : null;\n\n  // the following effect runs for every render of the map component and checks\n  // if there are differences between the known state of the map instance\n  // (cameraStateRef, which is updated by all bounds_changed events) and the\n  // desired state in the props.\n\n  useLayoutEffect(() => {\n    if (!map) return;\n\n    const nextCamera: google.maps.CameraOptions = {};\n    let needsUpdate = false;\n\n    if (\n      lat !== null &&\n      lng !== null &&\n      (cameraStateRef.current.center.lat !== lat ||\n        cameraStateRef.current.center.lng !== lng)\n    ) {\n      nextCamera.center = {lat, lng};\n      needsUpdate = true;\n    }\n\n    if (zoom !== null && cameraStateRef.current.zoom !== zoom) {\n      nextCamera.zoom = zoom as number;\n      needsUpdate = true;\n    }\n\n    if (heading !== null && cameraStateRef.current.heading !== heading) {\n      nextCamera.heading = heading as number;\n      needsUpdate = true;\n    }\n\n    if (tilt !== null && cameraStateRef.current.tilt !== tilt) {\n      nextCamera.tilt = tilt as number;\n      needsUpdate = true;\n    }\n\n    if (needsUpdate) {\n      map.moveCamera(nextCamera);\n    }\n  });\n}\n","import React, {CSSProperties} from 'react';\n\nexport const AuthFailureMessage = () => {\n  const style: CSSProperties = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 999,\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    textAlign: 'center',\n    justifyContent: 'center',\n    fontSize: '.8rem',\n    color: 'rgba(0,0,0,0.6)',\n    background: '#dddddd',\n    padding: '1rem 1.5rem'\n  };\n\n  return (\n    <div style={style}>\n      <h2>Error: AuthFailure</h2>\n      <p>\n        A problem with your API key prevents the map from rendering correctly.\n        Please make sure the value of the <code>APIProvider.apiKey</code> prop\n        is correct. Check the error-message in the console for further details.\n      </p>\n    </div>\n  );\n};\n","import {Ref, useCallback, useState} from 'react';\n\nexport function useCallbackRef<T>() {\n  const [el, setEl] = useState<T | null>(null);\n  const ref = useCallback((value: T) => setEl(value), [setEl]);\n\n  return [el, ref as Ref<T>] as const;\n}\n","import {useApiLoadingStatus} from './use-api-loading-status';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n/**\n * Hook to check if the Google Maps API is loaded\n */\nexport function useApiIsLoaded(): boolean {\n  const status = useApiLoadingStatus();\n\n  return status === APILoadingStatus.LOADED;\n}\n","import {useReducer} from 'react';\n\nexport function useForceUpdate(): () => void {\n  const [, forceUpdate] = useReducer(x => x + 1, 0);\n\n  return forceUpdate;\n}\n","import {MutableRefObject, useEffect, useRef} from 'react';\nimport {useForceUpdate} from '../../libraries/use-force-update';\n\nexport type CameraState = {\n  center: google.maps.LatLngLiteral;\n  heading: number;\n  tilt: number;\n  zoom: number;\n};\n\nexport type CameraStateRef = MutableRefObject<CameraState>;\n\nfunction handleBoundsChange(map: google.maps.Map, ref: CameraStateRef) {\n  const center = map.getCenter();\n  const zoom = map.getZoom();\n  const heading = map.getHeading() || 0;\n  const tilt = map.getTilt() || 0;\n  const bounds = map.getBounds();\n\n  if (!center || !bounds || !Number.isFinite(zoom)) {\n    console.warn(\n      '[useTrackedCameraState] at least one of the values from the map ' +\n        'returned undefined. This is not expected to happen. Please ' +\n        'report an issue at https://github.com/visgl/react-google-maps/issues/new'\n    );\n  }\n\n  // fixme: do we need the `undefined` cases for the camera-params? When are they used in the maps API?\n  Object.assign(ref.current, {\n    center: center?.toJSON() || {lat: 0, lng: 0},\n    zoom: (zoom as number) || 0,\n    heading: heading as number,\n    tilt: tilt as number\n  });\n}\n\n/**\n * Creates a mutable ref object to track the last known state of the map camera.\n * This is used in `useMapCameraParams` to reduce stuttering in normal operation\n * by avoiding updates of the map camera with values that have already been processed.\n */\nexport function useTrackedCameraStateRef(\n  map: google.maps.Map | null\n): CameraStateRef {\n  const forceUpdate = useForceUpdate();\n  const ref = useRef<CameraState>({\n    center: {lat: 0, lng: 0},\n    heading: 0,\n    tilt: 0,\n    zoom: 0\n  });\n\n  // Record camera state with every bounds_changed event dispatched by the map.\n  // This data is used to prevent feeding these values back to the\n  // map-instance when a typical \"controlled component\" setup (state variable is\n  // fed into and updated by the map).\n  useEffect(() => {\n    if (!map) return;\n\n    const listener = google.maps.event.addListener(\n      map,\n      'bounds_changed',\n      () => {\n        handleBoundsChange(map, ref);\n\n        // When an event is occured, we have to update during the next cycle.\n        // The application could decide to ignore the event and not update any\n        // camera props of the map, meaning that in that case we will have to\n        // 'undo' the change to the camera.\n        forceUpdate();\n      }\n    );\n\n    return () => listener.remove();\n  }, [map, forceUpdate]);\n\n  return ref;\n}\n","import {Ref, useEffect, useRef, useState} from 'react';\n\nimport {MapProps} from '../map';\nimport {APIProviderContextValue} from '../api-provider';\n\nimport {useCallbackRef} from '../../libraries/use-callback-ref';\nimport {useApiIsLoaded} from '../../hooks/use-api-is-loaded';\nimport {\n  CameraState,\n  CameraStateRef,\n  useTrackedCameraStateRef\n} from './use-tracked-camera-state-ref';\n\n/**\n * The main hook takes care of creating map-instances and registering them in\n * the api-provider context.\n * @return a tuple of the map-instance created (or null) and the callback\n *   ref that will be used to pass the map-container into this hook.\n * @internal\n */\nexport function useMapInstance(\n  props: MapProps,\n  context: APIProviderContextValue\n): readonly [\n  map: google.maps.Map | null,\n  containerRef: Ref<HTMLDivElement>,\n  cameraStateRef: CameraStateRef\n] {\n  const apiIsLoaded = useApiIsLoaded();\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [container, containerRef] = useCallbackRef<HTMLDivElement>();\n\n  const cameraStateRef = useTrackedCameraStateRef(map);\n\n  const {\n    id,\n    defaultBounds,\n    defaultCenter,\n    defaultZoom,\n    defaultHeading,\n    defaultTilt,\n\n    ...mapOptions\n  } = props;\n\n  // apply default camera props if available and not overwritten by controlled props\n  if (!mapOptions.center && defaultCenter) mapOptions.center = defaultCenter;\n  if (!mapOptions.zoom && Number.isFinite(defaultZoom))\n    mapOptions.zoom = defaultZoom;\n  if (!mapOptions.heading && Number.isFinite(defaultHeading))\n    mapOptions.heading = defaultHeading;\n  if (!mapOptions.tilt && Number.isFinite(defaultTilt))\n    mapOptions.tilt = defaultTilt;\n\n  for (const key of Object.keys(mapOptions) as (keyof typeof mapOptions)[])\n    if (mapOptions[key] === undefined) delete mapOptions[key];\n\n  const savedMapStateRef = useRef<{\n    mapId?: string | null;\n    cameraState: CameraState;\n  }>();\n\n  // create the map instance and register it in the context\n  useEffect(\n    () => {\n      if (!container || !apiIsLoaded) return;\n\n      const {addMapInstance, removeMapInstance} = context;\n      const mapId = props.mapId;\n      const newMap = new google.maps.Map(container, mapOptions);\n\n      setMap(newMap);\n      addMapInstance(newMap, id);\n\n      if (defaultBounds) {\n        newMap.fitBounds(defaultBounds);\n      }\n\n      // the savedMapState is used to restore the camera parameters when the mapId is changed\n      if (savedMapStateRef.current) {\n        const {mapId: savedMapId, cameraState: savedCameraState} =\n          savedMapStateRef.current;\n        if (savedMapId !== mapId) {\n          newMap.setOptions(savedCameraState);\n        }\n      }\n\n      return () => {\n        savedMapStateRef.current = {\n          mapId,\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          cameraState: cameraStateRef.current\n        };\n\n        // remove all event-listeners to minimize memory-leaks\n        google.maps.event.clearInstanceListeners(newMap);\n\n        setMap(null);\n        removeMapInstance(id);\n      };\n    },\n\n    // some dependencies are ignored in the list below:\n    //  - defaultBounds and the default* camera props will only be used once, and\n    //    changes should be ignored\n    //  - mapOptions has special hooks that take care of updating the options\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [container, apiIsLoaded, id, props.mapId]\n  );\n\n  return [map, containerRef, cameraStateRef] as const;\n}\n","/* eslint-disable complexity */\nimport React, {\n  CSSProperties,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo\n} from 'react';\n\nimport {APIProviderContext} from '../api-provider';\n\nimport {MapEventProps, useMapEvents} from './use-map-events';\nimport {useMapOptions} from './use-map-options';\nimport {useApiLoadingStatus} from '../../hooks/use-api-loading-status';\nimport {APILoadingStatus} from '../../libraries/api-loading-status';\nimport {\n  DeckGlCompatProps,\n  useDeckGLCameraUpdate\n} from './use-deckgl-camera-update';\nimport {toLatLngLiteral} from '../../libraries/lat-lng-utils';\nimport {useMapCameraParams} from './use-map-camera-params';\nimport {AuthFailureMessage} from './auth-failure-message';\nimport {useMapInstance} from './use-map-instance';\n\nexport interface GoogleMapsContextValue {\n  map: google.maps.Map | null;\n}\nexport const GoogleMapsContext =\n  React.createContext<GoogleMapsContextValue | null>(null);\n\nexport type {\n  MapCameraChangedEvent,\n  MapEvent,\n  MapEventProps,\n  MapMouseEvent\n} from './use-map-events';\n\nexport type MapCameraProps = {\n  center: google.maps.LatLngLiteral;\n  zoom: number;\n  heading?: number;\n  tilt?: number;\n};\n\n/**\n * Props for the Google Maps Map Component\n */\nexport type MapProps = google.maps.MapOptions &\n  MapEventProps &\n  DeckGlCompatProps & {\n    /**\n     * An id for the map, this is required when multiple maps are present\n     * in the same APIProvider context.\n     */\n    id?: string;\n    /**\n     * Additional style rules to apply to the map dom-element.\n     */\n    style?: CSSProperties;\n    /**\n     * Additional css class-name to apply to the element containing the map.\n     */\n    className?: string;\n    /**\n     * Indicates that the map will be controlled externally. Disables all controls provided by the map itself.\n     */\n    controlled?: boolean;\n\n    defaultCenter?: google.maps.LatLngLiteral;\n    defaultZoom?: number;\n    defaultHeading?: number;\n    defaultTilt?: number;\n    /**\n     * Alternative way to specify the default camera props as a geographic region that should be fully visible\n     */\n    defaultBounds?: google.maps.LatLngBoundsLiteral;\n  };\n\nexport const Map = (props: PropsWithChildren<MapProps>) => {\n  const {children, id, className, style} = props;\n  const context = useContext(APIProviderContext);\n  const loadingStatus = useApiLoadingStatus();\n\n  if (!context) {\n    throw new Error(\n      '<Map> can only be used inside an <ApiProvider> component.'\n    );\n  }\n\n  const [map, mapRef, cameraStateRef] = useMapInstance(props, context);\n\n  useMapCameraParams(map, cameraStateRef, props);\n  useMapEvents(map, props);\n  useMapOptions(map, props);\n\n  const isDeckGlControlled = useDeckGLCameraUpdate(map, props);\n  const isControlledExternally = !!props.controlled;\n\n  // disable interactions with the map for externally controlled maps\n  useEffect(() => {\n    if (!map) return;\n\n    // fixme: this doesn't seem to belong here (and it's mostly there for convenience anyway).\n    //   The reasoning is that a deck.gl canvas will be put on top of the map, rendering\n    //   any default map controls pretty much useless\n    if (isDeckGlControlled) {\n      map.setOptions({disableDefaultUI: true});\n    }\n\n    // disable all control-inputs when the map is controlled externally\n    if (isDeckGlControlled || isControlledExternally) {\n      map.setOptions({\n        gestureHandling: 'none',\n        keyboardShortcuts: false\n      });\n    }\n\n    return () => {\n      map.setOptions({\n        gestureHandling: props.gestureHandling,\n        keyboardShortcuts: props.keyboardShortcuts\n      });\n    };\n  }, [\n    map,\n    isDeckGlControlled,\n    isControlledExternally,\n    props.gestureHandling,\n    props.keyboardShortcuts\n  ]);\n\n  // setup a stable cameraOptions object that can be used as dependency\n  const center = props.center ? toLatLngLiteral(props.center) : null;\n  let lat: number | null = null;\n  let lng: number | null = null;\n  if (center && Number.isFinite(center.lat) && Number.isFinite(center.lng)) {\n    lat = center.lat as number;\n    lng = center.lng as number;\n  }\n\n  const cameraOptions: google.maps.CameraOptions = useMemo(() => {\n    return {\n      center: {lat: lat ?? 0, lng: lng ?? 0},\n      zoom: props.zoom ?? 0,\n      heading: props.heading ?? 0,\n      tilt: props.tilt ?? 0\n    };\n  }, [lat, lng, props.zoom, props.heading, props.tilt]);\n\n  // externally controlled mode: reject all camera changes that don't correspond to changes in props\n  useLayoutEffect(() => {\n    if (!map || !isControlledExternally) return;\n\n    map.moveCamera(cameraOptions);\n    const listener = map.addListener('bounds_changed', () => {\n      map.moveCamera(cameraOptions);\n    });\n\n    return () => listener.remove();\n  }, [map, isControlledExternally, cameraOptions]);\n\n  const combinedStyle: CSSProperties = useMemo(\n    () => ({\n      width: '100%',\n      height: '100%',\n      // when using deckgl, the map should be sent to the back\n      zIndex: isDeckGlControlled ? -1 : 0,\n\n      ...style\n    }),\n    [style, isDeckGlControlled]\n  );\n\n  const contextValue: GoogleMapsContextValue = useMemo(() => ({map}), [map]);\n\n  if (loadingStatus === APILoadingStatus.AUTH_FAILURE) {\n    return (\n      <div\n        style={{position: 'relative', ...(className ? {} : combinedStyle)}}\n        className={className}>\n        <AuthFailureMessage />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={mapRef}\n      data-testid={'map'}\n      style={className ? undefined : combinedStyle}\n      className={className}\n      {...(id ? {id} : {})}>\n      {map ? (\n        <GoogleMapsContext.Provider value={contextValue}>\n          {children}\n        </GoogleMapsContext.Provider>\n      ) : null}\n    </div>\n  );\n};\nMap.deckGLViewProps = true;\n","import {useContext, useEffect} from 'react';\n\nimport {APIProviderContext} from '../components/api-provider';\nimport {useApiIsLoaded} from './use-api-is-loaded';\n\ninterface ApiLibraries {\n  core: google.maps.CoreLibrary;\n  maps: google.maps.MapsLibrary;\n  places: google.maps.PlacesLibrary;\n  geocoding: google.maps.GeocodingLibrary;\n  routes: google.maps.RoutesLibrary;\n  marker: google.maps.MarkerLibrary;\n  geometry: google.maps.GeometryLibrary;\n  elevation: google.maps.ElevationLibrary;\n  streetView: google.maps.StreetViewLibrary;\n  journeySharing: google.maps.JourneySharingLibrary;\n  drawing: google.maps.DrawingLibrary;\n  visualization: google.maps.VisualizationLibrary;\n}\n\nexport function useMapsLibrary<\n  K extends keyof ApiLibraries,\n  V extends ApiLibraries[K]\n>(name: K): V | null;\n\nexport function useMapsLibrary(name: string) {\n  const apiIsLoaded = useApiIsLoaded();\n  const ctx = useContext(APIProviderContext);\n\n  useEffect(() => {\n    if (!apiIsLoaded || !ctx) return;\n\n    // Trigger loading the libraries via our proxy-method.\n    // The returned promise is ignored, since importLibrary will update loadedLibraries\n    // list in the context, triggering a re-render.\n    void ctx.importLibrary(name);\n  }, [apiIsLoaded, ctx, name]);\n\n  return ctx?.loadedLibraries[name] || null;\n}\n","/* eslint-disable complexity */\nimport React, {\n  Children,\n  forwardRef,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useState\n} from 'react';\n\nimport {createPortal} from 'react-dom';\nimport {GoogleMapsContext} from './map';\n\nimport type {Ref, PropsWithChildren} from 'react';\nimport {useMapsLibrary} from '../hooks/use-maps-library';\n\nexport interface AdvancedMarkerContextValue {\n  marker: google.maps.marker.AdvancedMarkerElement;\n}\n\nexport const AdvancedMarkerContext =\n  React.createContext<AdvancedMarkerContextValue | null>(null);\n\ntype AdvancedMarkerEventProps = {\n  onClick?: (e: google.maps.MapMouseEvent) => void;\n  onDrag?: (e: google.maps.MapMouseEvent) => void;\n  onDragStart?: (e: google.maps.MapMouseEvent) => void;\n  onDragEnd?: (e: google.maps.MapMouseEvent) => void;\n};\n\nexport type AdvancedMarkerProps = PropsWithChildren<\n  Omit<google.maps.marker.AdvancedMarkerElementOptions, 'gmpDraggable'> &\n    AdvancedMarkerEventProps & {\n      /**\n       * className to add a class to the advanced marker element\n       * Can only be used with HTML Marker content\n       */\n      className?: string;\n      draggable?: boolean;\n    }\n>;\n\nexport type AdvancedMarkerRef = google.maps.marker.AdvancedMarkerElement | null;\nfunction useAdvancedMarker(props: AdvancedMarkerProps) {\n  const [marker, setMarker] =\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\n  const [contentContainer, setContentContainer] =\n    useState<HTMLDivElement | null>(null);\n\n  const map = useContext(GoogleMapsContext)?.map;\n  const markerLibrary = useMapsLibrary('marker');\n\n  const {\n    children,\n    className,\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    collisionBehavior,\n    draggable,\n    position,\n    title,\n    zIndex\n  } = props;\n\n  const numChilds = Children.count(children);\n\n  // create marker instance and add it to the map when map becomes available\n  useEffect(() => {\n    if (!map || !markerLibrary) return;\n\n    const newMarker = new markerLibrary.AdvancedMarkerElement();\n    newMarker.map = map;\n\n    setMarker(newMarker);\n\n    // create container for marker content if there are children\n    if (numChilds > 0) {\n      const el = document.createElement('div');\n      if (className) el.className = className;\n\n      newMarker.content = el;\n\n      setContentContainer(el);\n    }\n\n    return () => {\n      newMarker.map = null;\n      setMarker(null);\n      setContentContainer(null);\n    };\n    // We do not want to re-render the whole marker when the className changes\n    // because that causes a short flickering of the marker.\n    // The className update is handled in the useEffect below.\n    // Excluding the className from the dependency array onm purpose here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, markerLibrary, numChilds]);\n\n  // update className of advanced marker element\n  useEffect(() => {\n    if (!contentContainer) return;\n    contentContainer.className = className ?? '';\n  }, [contentContainer, className]);\n\n  // bind all marker events\n  useEffect(() => {\n    if (!marker) return;\n\n    const gme = google.maps.event;\n\n    if (onClick) gme.addListener(marker, 'click', onClick);\n    if (onDrag) gme.addListener(marker, 'drag', onDrag);\n    if (onDragStart) gme.addListener(marker, 'dragstart', onDragStart);\n    if (onDragEnd) gme.addListener(marker, 'dragend', onDragEnd);\n\n    if ((onDrag || onDragStart || onDragEnd) && !draggable) {\n      console.warn(\n        'You need to set the marker to draggable to listen to drag-events.'\n      );\n    }\n\n    const m = marker;\n    return () => {\n      gme.clearInstanceListeners(m);\n    };\n  }, [marker, draggable, onClick, onDragStart, onDrag, onDragEnd]);\n\n  // update other marker props when changed\n  useEffect(() => {\n    if (!marker) return;\n\n    if (position !== undefined) marker.position = position;\n    if (draggable !== undefined) marker.gmpDraggable = draggable;\n    if (collisionBehavior !== undefined)\n      marker.collisionBehavior = collisionBehavior;\n    if (zIndex !== undefined) marker.zIndex = zIndex;\n    if (typeof title === 'string') marker.title = title;\n  }, [marker, position, draggable, collisionBehavior, zIndex, title]);\n\n  return [marker, contentContainer] as const;\n}\n\nexport const AdvancedMarker = forwardRef(\n  (props: AdvancedMarkerProps, ref: Ref<AdvancedMarkerRef>) => {\n    const {children} = props;\n    const [marker, contentContainer] = useAdvancedMarker(props);\n\n    const advancedMarkerContextValue: AdvancedMarkerContextValue | null =\n      useMemo(() => (marker ? {marker} : null), [marker]);\n\n    useImperativeHandle(ref, () => marker, [marker]);\n\n    if (!marker) {\n      return null;\n    }\n\n    return (\n      <AdvancedMarkerContext.Provider value={advancedMarkerContextValue}>\n        {contentContainer !== null && createPortal(children, contentContainer)}\n      </AdvancedMarkerContext.Provider>\n    );\n  }\n);\n\nexport function useAdvancedMarkerRef() {\n  const [marker, setMarker] =\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\n\n  const refCallback = useCallback((m: AdvancedMarkerRef | null) => {\n    setMarker(m);\n  }, []);\n\n  return [refCallback, marker] as const;\n}\n","/* eslint-disable complexity */\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport {createPortal} from 'react-dom';\n\nimport {GoogleMapsContext} from './map';\n\n/**\n * Props for the Info Window Component\n */\nexport type InfoWindowProps = google.maps.InfoWindowOptions & {\n  onCloseClick?: () => void;\n  anchor?: google.maps.Marker | google.maps.marker.AdvancedMarkerElement | null;\n  shouldFocus?: boolean;\n};\n\n/**\n * Component to render a Google Maps Info Window\n */\nexport const InfoWindow = (props: PropsWithChildren<InfoWindowProps>) => {\n  const {children, anchor, shouldFocus, onCloseClick, ...infoWindowOptions} =\n    props;\n  const map = useContext(GoogleMapsContext)?.map;\n\n  const infoWindowRef = useRef<google.maps.InfoWindow | null>(null);\n  const [contentContainer, setContentContainer] =\n    useState<HTMLDivElement | null>(null);\n\n  // create infowindow once map is available\n  useEffect(() => {\n    if (!map) return;\n\n    const newInfowindow = new google.maps.InfoWindow(infoWindowOptions);\n\n    // Add content to info window\n    const el = document.createElement('div');\n    newInfowindow.setContent(el);\n\n    infoWindowRef.current = newInfowindow;\n    setContentContainer(el);\n\n    // Cleanup info window and event listeners on unmount\n    return () => {\n      google.maps.event.clearInstanceListeners(newInfowindow);\n\n      newInfowindow.close();\n      el.remove();\n\n      setContentContainer(null);\n    };\n\n    // `infoWindowOptions` is missing from dependencies:\n    //\n    // we don't want to re-render a whole new infowindow\n    // when the options change to prevent flickering.\n    // Update of infoWindow options is handled in the useEffect below.\n    //\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, children]);\n\n  // Update infoWindowOptions\n  useEffect(() => {\n    infoWindowRef.current?.setOptions(infoWindowOptions);\n  }, [infoWindowOptions]);\n\n  // Handle the close click callback\n  useEffect(() => {\n    if (!infoWindowRef.current) return;\n\n    let listener: google.maps.MapsEventListener | null = null;\n\n    if (onCloseClick) {\n      listener = google.maps.event.addListener(\n        infoWindowRef.current,\n        'closeclick',\n        onCloseClick\n      );\n    }\n\n    return () => {\n      if (listener) listener.remove();\n    };\n  }, [onCloseClick]);\n\n  // Open info window after content container is set\n  useEffect(() => {\n    // anchor === null means an anchor is defined but not ready yet.\n    if (!contentContainer || !infoWindowRef.current || anchor === null) return;\n\n    const openOptions: google.maps.InfoWindowOpenOptions = {map};\n\n    if (anchor) {\n      openOptions.anchor = anchor;\n    }\n\n    if (shouldFocus !== undefined) {\n      openOptions.shouldFocus = shouldFocus;\n    }\n\n    infoWindowRef.current.open(openOptions);\n  }, [contentContainer, infoWindowRef, anchor, map, shouldFocus]);\n\n  return (\n    <>{contentContainer !== null && createPortal(children, contentContainer)}</>\n  );\n};\n","const shownMessages = new Set();\n\nexport function logErrorOnce(...args: Parameters<typeof console.error>) {\n  const key = JSON.stringify(args);\n\n  if (!shownMessages.has(key)) {\n    shownMessages.add(key);\n\n    console.error(...args);\n  }\n}\n","import {useContext} from 'react';\n\nimport {APIProviderContext} from '../components/api-provider';\nimport {GoogleMapsContext} from '../components/map';\nimport {logErrorOnce} from '../libraries/errors';\n\n/**\n * Retrieves a map-instance from the context. This is either an instance\n * identified by id or the parent map instance if no id is specified.\n * Returns null if neither can be found.\n */\nexport const useMap = (id: string | null = null): google.maps.Map | null => {\n  const ctx = useContext(APIProviderContext);\n  const {map} = useContext(GoogleMapsContext) || {};\n\n  if (ctx === null) {\n    logErrorOnce(\n      'useMap(): failed to retrieve APIProviderContext. ' +\n        'Make sure that the <APIProvider> component exists and that the ' +\n        'component you are calling `useMap()` from is a sibling of the ' +\n        '<APIProvider>.'\n    );\n\n    return null;\n  }\n\n  const {mapInstances} = ctx;\n\n  // if an id is specified, the corresponding map or null is returned\n  if (id !== null) return mapInstances[id] || null;\n\n  // otherwise, return the closest ancestor\n  if (map) return map;\n\n  // finally, return the default map instance\n  return mapInstances['default'] || null;\n};\n","import {useEffect, useMemo} from 'react';\nimport {createPortal} from 'react-dom';\nimport {useMap} from '../hooks/use-map';\n\nimport type {PropsWithChildren} from 'react';\n\ntype MapControlProps = PropsWithChildren<{\n  position: ControlPosition;\n}>;\n\n/**\n * Copy of the `google.maps.ControlPosition` constants.\n * They have to be duplicated here since we can't wait for the maps API to load to be able to use them.\n */\nexport const ControlPosition = {\n  TOP_LEFT: 1,\n  TOP_CENTER: 2,\n  TOP: 2,\n  TOP_RIGHT: 3,\n  LEFT_CENTER: 4,\n  LEFT_TOP: 5,\n  LEFT: 5,\n  LEFT_BOTTOM: 6,\n  RIGHT_TOP: 7,\n  RIGHT: 7,\n  RIGHT_CENTER: 8,\n  RIGHT_BOTTOM: 9,\n  BOTTOM_LEFT: 10,\n  BOTTOM_CENTER: 11,\n  BOTTOM: 11,\n  BOTTOM_RIGHT: 12,\n  CENTER: 13,\n  BLOCK_START_INLINE_START: 14,\n  BLOCK_START_INLINE_CENTER: 15,\n  BLOCK_START_INLINE_END: 16,\n  INLINE_START_BLOCK_CENTER: 17,\n  INLINE_START_BLOCK_START: 18,\n  INLINE_START_BLOCK_END: 19,\n  INLINE_END_BLOCK_START: 20,\n  INLINE_END_BLOCK_CENTER: 21,\n  INLINE_END_BLOCK_END: 22,\n  BLOCK_END_INLINE_START: 23,\n  BLOCK_END_INLINE_CENTER: 24,\n  BLOCK_END_INLINE_END: 25\n} as const;\nexport type ControlPosition =\n  (typeof ControlPosition)[keyof typeof ControlPosition];\n\nexport const MapControl = ({children, position}: MapControlProps) => {\n  const controlContainer = useMemo(() => document.createElement('div'), []);\n  const map = useMap();\n\n  useEffect(() => {\n    if (!map) return;\n\n    const controls = map.controls[position];\n\n    controls.push(controlContainer);\n\n    return () => {\n      const controlsArray = controls.getArray();\n      // controlsArray could be undefined if the map is in an undefined state (e.g. invalid API-key, see #276\n      if (!controlsArray) return;\n\n      const index = controlsArray.indexOf(controlContainer);\n      controls.removeAt(index);\n    };\n  }, [controlContainer, map, position]);\n\n  return createPortal(children, controlContainer);\n};\n","/* eslint-disable complexity */\nimport React, {\n  forwardRef,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useState\n} from 'react';\n\nimport {GoogleMapsContext} from './map';\n\nimport type {Ref} from 'react';\n\ntype MarkerEventProps = {\n  onClick?: (e: google.maps.MapMouseEvent) => void;\n  onDrag?: (e: google.maps.MapMouseEvent) => void;\n  onDragStart?: (e: google.maps.MapMouseEvent) => void;\n  onDragEnd?: (e: google.maps.MapMouseEvent) => void;\n  onMouseOver?: (e: google.maps.MapMouseEvent) => void;\n  onMouseOut?: (e: google.maps.MapMouseEvent) => void;\n};\n\nexport type MarkerProps = google.maps.MarkerOptions & MarkerEventProps;\n\nexport type MarkerRef = Ref<google.maps.Marker | null>;\n\nfunction useMarker(props: MarkerProps) {\n  const [marker, setMarker] = useState<google.maps.Marker | null>(null);\n  const map = useContext(GoogleMapsContext)?.map;\n\n  const {\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    onMouseOver,\n    onMouseOut,\n    ...markerOptions\n  } = props;\n\n  const {position, draggable} = markerOptions;\n\n  // create marker instance and add to the map once the map is available\n  useEffect(() => {\n    if (!map) {\n      if (map === undefined)\n        console.error('<Marker> has to be inside a Map component.');\n\n      return;\n    }\n\n    const newMarker = new google.maps.Marker(markerOptions);\n    newMarker.setMap(map);\n    setMarker(newMarker);\n\n    return () => {\n      newMarker.setMap(null);\n      setMarker(null);\n    };\n    // We do not want to re-render the whole marker when the options change.\n    // Marker options update is handled in a useEffect below.\n    // Excluding markerOptions from dependency array on purpose here.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map]);\n\n  // attach and re-attach event-handlers when any of the properties change\n  useEffect(() => {\n    if (!marker) return;\n\n    const m = marker;\n\n    // Add event listeners\n    const gme = google.maps.event;\n\n    if (onClick) gme.addListener(m, 'click', onClick);\n    if (onDrag) gme.addListener(m, 'drag', onDrag);\n    if (onDragStart) gme.addListener(m, 'dragstart', onDragStart);\n    if (onDragEnd) gme.addListener(m, 'dragend', onDragEnd);\n    if (onMouseOver) gme.addListener(m, 'mouseover', onMouseOver);\n    if (onMouseOut) gme.addListener(m, 'mouseout', onMouseOut);\n\n    marker.setDraggable(Boolean(draggable));\n\n    return () => {\n      gme.clearInstanceListeners(m);\n    };\n  }, [\n    marker,\n    draggable,\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    onMouseOver,\n    onMouseOut\n  ]);\n\n  // update markerOptions (note the dependencies aren't properly checked\n  // here, we just assume that setOptions is smart enough to not waste a\n  // lot of time updating values that didn't change)\n  useEffect(() => {\n    if (!marker) return;\n    if (markerOptions) marker.setOptions(markerOptions);\n  }, [marker, markerOptions]);\n\n  // update position when changed\n  useEffect(() => {\n    // Should not update position when draggable\n    if (draggable || !position || !marker) return;\n\n    marker.setPosition(position);\n  }, [draggable, position, marker]);\n\n  return marker;\n}\n\n/**\n * Component to render a Google Maps Marker on a map\n */\nexport const Marker = forwardRef((props: MarkerProps, ref: MarkerRef) => {\n  const marker = useMarker(props);\n\n  useImperativeHandle(ref, () => marker, [marker]);\n\n  return <></>;\n});\n\nexport function useMarkerRef() {\n  const [marker, setMarker] = useState<google.maps.Marker | null>(null);\n\n  const refCallback = useCallback((m: google.maps.Marker | null) => {\n    setMarker(m);\n  }, []);\n\n  return [refCallback, marker] as const;\n}\n","import {\n  Children,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo\n} from 'react';\nimport {AdvancedMarkerContext} from './advanced-marker';\nimport {createPortal} from 'react-dom';\nimport {logErrorOnce} from '../libraries/errors';\n\n/**\n * Props for the Pin component\n */\nexport type PinProps = google.maps.marker.PinElementOptions;\n\n/**\n * Component to render a google maps marker Pin View\n */\nexport const Pin = (props: PropsWithChildren<PinProps>) => {\n  const advancedMarker = useContext(AdvancedMarkerContext)?.marker;\n  const glyphContainer = useMemo(() => document.createElement('div'), []);\n\n  // Create Pin View instance\n  useEffect(() => {\n    if (!advancedMarker) {\n      if (advancedMarker === undefined) {\n        console.error(\n          'The <Pin> component can only be used inside <AdvancedMarker>.'\n        );\n      }\n\n      return;\n    }\n\n    if (props.glyph && props.children) {\n      logErrorOnce(\n        'The <Pin> component only uses children to render the glyph if both the glyph property and children are present.'\n      );\n    }\n\n    if (Children.count(props.children) > 1) {\n      logErrorOnce(\n        'Passing multiple children to the <Pin> component might lead to unexpected results.'\n      );\n    }\n\n    const pinViewOptions: google.maps.marker.PinElementOptions = {\n      ...props\n    };\n\n    const pinElement = new google.maps.marker.PinElement(pinViewOptions);\n\n    // Set glyph to glyph container if children are present (rendered via portal).\n    // If both props.glyph and props.children are present, props.children takes priority.\n    if (props.children) {\n      pinElement.glyph = glyphContainer;\n    }\n\n    // Set content of Advanced Marker View to the Pin View element\n    advancedMarker.content = pinElement.element;\n  }, [advancedMarker, glyphContainer, props]);\n\n  return createPortal(props.children, glyphContainer);\n};\n","const mapLinear = (x: number, a1: number, a2: number, b1: number, b2: number) =>\n  b1 + ((x - a1) * (b2 - b1)) / (a2 - a1);\n\nconst getMapMaxTilt = (zoom: number) => {\n  if (zoom <= 10) {\n    return 30;\n  }\n  if (zoom >= 15.5) {\n    return 67.5;\n  }\n\n  // range [10...14]\n  if (zoom <= 14) {\n    return mapLinear(zoom, 10, 14, 30, 45);\n  }\n\n  // range [14...15.5]\n  return mapLinear(zoom, 14, 15.5, 45, 67.5);\n};\n\n/**\n * Function to limit the tilt range of the google maps map when updating the view state\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const limitTiltRange = ({viewState}: any) => {\n  const pitch = viewState.pitch;\n  const gmZoom = viewState.zoom + 1;\n  const maxTilt = getMapMaxTilt(gmZoom);\n\n  return {...viewState, fovy: 25, pitch: Math.min(maxTilt, pitch)};\n};\n"],"names":["APILoadingStatus","NOT_LOADED","LOADING","LOADED","FAILED","AUTH_FAILURE","MAPS_API_BASE_URL","GoogleMapsApiLoader","load","params","onLoadingStatusChange","_window$google","_this","libraries","split","serializedParams","serializeParams","listeners","push","window","google","maps","importLibrary","serializedApiParams","loadingStatus","notifyLoadingStatusListeners","initImportLibrary","console","warn","librariesToLoad","concat","Promise","resolve","all","map","name","then","e","reject","v","key","language","region","authReferrerPolicy","solutionChannel","join","_this2","error","apiPromise","loadApi","_document$querySelect","scriptElement","document","createElement","urlParams","URLSearchParams","_i","_Object$entries","Object","entries","length","_Object$entries$_i","value","urlParamName","replace","t","toLowerCase","set","async","src","toString","nonce","querySelector","onerror","Error","__googleMapsCallback__","gm_authFailure","head","append","libraryName","_iterator","_createForOfIteratorHelperLoose","_step","done","fn","_settle","pact","state","s","_Pact","o","bind","prototype","onFulfilled","onRejected","callback","result","_isSettledPact","thenable","APIProviderContext","React","createContext","useMapInstances","_useState","useState","mapInstances","setMapInstances","addMapInstance","mapInstance","id","instances","_extends2","_extends","removeMapInstance","_ref","remaining","_objectWithoutPropertiesLoose","_toPropertyKey","clearMapInstances","useGoogleMapsApiLoader","props","onLoad","apiKey","version","_props$libraries","otherApiParams","_excluded","_useState2","status","setStatus","_useReducer","useReducer","loadedLibraries","action","_extends3","addLoadedLibrary","librariesString","useMemo","JSON","stringify","useCallback","_google","res","useEffect","_temp3","_catch","_temp2","_temp","_forOf","APIProvider","children","loaderProps","_excluded2","_useMapInstances","_useGoogleMapsApiLoad","contextValue","Provider","useMapEvents","_loop","propName","handler","eventType","propNameToEventType","listener","event","addListener","ev","createMapEvent","remove","eventPropNames","type","srcEvent","detail","stoppable","stop","cameraEventTypes","includes","camEvent","center","getCenter","zoom","getZoom","heading","getHeading","tilt","getTilt","bounds","getBounds","Number","isFinite","toJSON","lat","lng","north","east","south","west","mouseEventTypes","_srcEvent$latLng","mouseEvent","domEvent","latLng","placeId","onBoundsChanged","onCenterChanged","onClick","onContextmenu","onDblclick","onDrag","onDragend","onDragstart","onHeadingChanged","onIdle","onIsFractionalZoomEnabledChanged","onMapCapabilitiesChanged","onMapTypeIdChanged","onMousemove","onMouseout","onMouseover","onProjectionChanged","onRenderingTypeChanged","onTilesLoaded","onTiltChanged","onZoomChanged","onCameraChanged","keys","useDeepCompareEffect","effect","deps","ref","useRef","undefined","current","isDeepEqual","mapOptionKeys","Set","useMapOptions","mapProps","mapOptions","_keys","has","setOptions","useApiLoadingStatus","_useContext","useContext","useDeckGLCameraUpdate","viewport","viewState","isDeckGlControlled","useLayoutEffect","latitude","longitude","bearing","pitch","moveCamera","isLatLngLiteral","obj","latLngEquals","a","b","A","toLatLngLiteral","B","useMapCameraParams","cameraStateRef","nextCamera","needsUpdate","AuthFailureMessage","style","position","top","left","bottom","right","zIndex","display","flexFlow","textAlign","justifyContent","fontSize","color","background","padding","useCallbackRef","el","setEl","useApiIsLoaded","useForceUpdate","x","forceUpdate","handleBoundsChange","assign","useTrackedCameraStateRef","useMapInstance","context","apiIsLoaded","setMap","_useCallbackRef","container","containerRef","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","_Object$keys","savedMapStateRef","mapId","newMap","Map","fitBounds","_savedMapStateRef$cur","savedMapId","savedCameraState","cameraState","clearInstanceListeners","GoogleMapsContext","className","_useMapInstance","mapRef","isControlledExternally","controlled","disableDefaultUI","gestureHandling","keyboardShortcuts","cameraOptions","_lat","_lng","_props$zoom","_props$heading","_props$tilt","combinedStyle","width","height","deckGLViewProps","useMapsLibrary","ctx","AdvancedMarkerContext","useAdvancedMarker","marker","setMarker","contentContainer","setContentContainer","markerLibrary","onDragStart","onDragEnd","collisionBehavior","draggable","title","numChilds","Children","count","newMarker","AdvancedMarkerElement","content","gme","m","gmpDraggable","AdvancedMarker","forwardRef","_useAdvancedMarker","advancedMarkerContextValue","useImperativeHandle","createPortal","useAdvancedMarkerRef","_useState3","refCallback","InfoWindow","anchor","shouldFocus","onCloseClick","infoWindowOptions","infoWindowRef","newInfowindow","setContent","close","_infoWindowRef$curren","openOptions","open","Fragment","shownMessages","logErrorOnce","args","slice","call","arguments","_console","add","apply","useMap","ControlPosition","TOP_LEFT","TOP_CENTER","TOP","TOP_RIGHT","LEFT_CENTER","LEFT_TOP","LEFT","LEFT_BOTTOM","RIGHT_TOP","RIGHT","RIGHT_CENTER","RIGHT_BOTTOM","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM","BOTTOM_RIGHT","CENTER","BLOCK_START_INLINE_START","BLOCK_START_INLINE_CENTER","BLOCK_START_INLINE_END","INLINE_START_BLOCK_CENTER","INLINE_START_BLOCK_START","INLINE_START_BLOCK_END","INLINE_END_BLOCK_START","INLINE_END_BLOCK_CENTER","INLINE_END_BLOCK_END","BLOCK_END_INLINE_START","BLOCK_END_INLINE_CENTER","BLOCK_END_INLINE_END","MapControl","controlContainer","controls","controlsArray","getArray","index","indexOf","removeAt","useMarker","onMouseOver","onMouseOut","markerOptions","Marker","setDraggable","Boolean","setPosition","useMarkerRef","Pin","advancedMarker","glyphContainer","glyph","pinViewOptions","pinElement","PinElement","element","mapLinear","a1","a2","b1","b2","getMapMaxTilt","limitTiltRange","gmZoom","maxTilt","fovy","Math","min"],"mappings":"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"}